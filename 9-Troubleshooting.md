# Домашнее задание к занятию "4.8. Траблшутинг"

## Выполнил Савицкий Андрей

### Задание 1 с ответами. 

1. Укажите путь к файлам логов веб-сервера `Nginx`:

   `/var/log/nginx/access.log` путь к файлам логов веб-сервера Nginx;
   
3. Где находится конфигурационный файл, в котором можно посмотреть / поменять эти пути?

   `/etc/nginx/nginx.conf` конфигурационный файл где можно посмотреть путь к файлам логов веб-сервера Nginx и поменять их в случае необходимости;
     
5. Какой командой можно воспользоваться для просмотра файла журнала в режиме реального времени?

   `tail -f access.log` команда для просмотра файла журнала в режиме реального времени.  

---

### Задание 2 с ответами. 

Познакомьтесь со схемой сети.

![](https://i.imgur.com/RefFHYj.png)

1. `COMP1` не может обменяться данными с `COMP4`. Какую последовательность действий вы выберете для того, чтобы локализовать проблему?

   * Устранение проблем физического уровня: имеется ли электричество на оборудовании, подключен ли кабель, целостность самого кабеля;  

   * Устранение проблем с connectivity: есть ли линк, не заблокирован ли порт на коммутаторе, не заблокирован ли MAC-адрес на коммутаторе;  

   * Устранение проблем с некорректной настройкой: есть ли связь на L2 уровне, есть ли связь на L3 уровне, не работает связь с конкретным ip или «много что работает» с этим ip, есть ли связь на L4 уровне; 

   * Устранение проблем некорректной работы ПО: есть ли связь на L4 уровне по тем же портам с другими хостами, корректно ли работает ПО со стороны одного из этих пк, несоответствие версий ПО; 

   * Устранение загруженности канала; 

   * Устранение проблемы на стороне провайдера - созвоном с ним.
     
2. Возможно ли, чтобы при выполнении `ping 192.168.1.2` с компьютера `COMP5`, `ping` прошёл, а подключение по HTTP с `COMP5` на `COMP1` не проходило бы?

   Да возможна, это говорит о наличие проблем с некорректно настроенной работой ПО.  

   Если ping проходит, значит компьютер работает и может ответить на запросы, но если подключение по HTTP не проходит, тогда возможны: отсутствие установленного сервиса; сервис установлен, но он не запущен; firewall блокирует сервис; сервис отвечает по другому порту (не по 80); доступ настроен только с определенных IP-адресов.  

3. `COMP5` отправляет `ping` на `COMP1` и `COMP2`, при этом `COMP1` на `ping` отвечает, а `COMP2` - нет: 

*Приведите максимальное количество причин. Самую простую, но нередко встречающуюся - «У `COMP2` выдернули кабель питания» - я уже ответил за вас.*

   к компьютеру COMP2 не подключен сетевой кабель или он повреждён; на коммутаторе заблокирован или не настроен или отключён порт к которому подключен COMP2; на коммутаторе заблокирован MAC-адрес COMP2; на маршрутизаторе заблокирован или не настроен или отключен порт, к которому подключен COMP2; на компьютере COMP2 некорректно настроено подключение - прописан некорректный ip-адрес, настроена некорректная маршрутизация, некорректно прописан или вовсе не прописан шлюз, firewall заблокировал ICMP. 

4. `COMP1` пингует только адреса из подсети `192.168.1.0/24` (`COMP2` и `192.168.1.1`), больше никакие адреса не пингуются. С чем это может быть связано?

   Это связано с тем, что на COMP1 в настройках линка не прописан параметр Gateway – в итоге, все запросы, отправляемые на адреса, вне диапазона сети `192.168.1.0/24` теряются, так как не могут найти маршрут до адресата. 

---

### Задание 3. 

Используя схему из Задания 2, попробуйте ответить на вопросы:
1. `COMP1` и `COMP2` оба пингуют `10.1.1.2`, однако не пингуют `192.168.2.1` и прочие адреса из `192.168.2.0/24`. Как вы думаете, что не так и как это можно исправить?
2. Какими способами мы можем сделать так, чтобы `COMP2` не смог общаться ни с кем кроме своей локальной сети? (Приведите вариант с настройками самого `COMP2` и попробуйте придумать, можно ли что-то сделать на маршрутизаторе `192.168.1.1`)
3. Как вы думаете, что будет происходить при попытке провести `ping` с `COMP5` на `192.168.2.3` ?

*Приведите ответ в свободной форме.*

---

### Задание 4. 

- Сделайте `ping` с одной виртуальной / физической машины на другую.
- Используя [описание утилиты iperf](https://losst.ru/kak-polzovatsya-iperf), загрузите канал между двумя виртуальными машинами на максимум, например, на 60 секунд, в процессе загрузки повторите `ping`.
- Изменились ли цифры в ответе команды `ping`? Почему? Есть ли разница между физическими и виртуальными машинами?

*Приведите скриншоты/ответы команд до и во время высокой загрузки каналов.*
